<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Cibers contact app!</title>

		<link rel="stylesheet" href="../../css/main.css"/>
	</head>
	<body>
		<header class="header">
			<figure id="logo">
				<img src="../../css/images/ciber_logo.png" alt="Logo">
			</figure>
			<nav class="navigation">
				<a href="#">Hovedside</a>
				<a href="favorites.html">Favoritter</a>
			</nav>
		</header>

		<section class="contacts">
			
		</section>

		<template id="contact-template">
			<div class="contact-header">
				<h2></h2>
				<img/>
			</div>
			<div class="detailed-info hidden">
				<ul>
					<li class="position"></li>
					<li class="project"></li>
					<li class="education"></li>
				</ul>
			</div>
		</template>

		<script>
			var contacts = [
			  {'name': 'Morten Kjelling', 'img': '../../css/images/morten.png', 'position': 'Frontend / .NET', 'project': 'Komplett.no', 'education': 'UiO'},
			  {'name': 'Alexander Perry', 'img': '../../css/images/perry.png', 'position': 'Frontend / .NET', 'project': 'NAF', 'education': 'Informatikk @ NTNU'},
			  {'name': 'Bj√∏rn Vegard Thoresen', 'img': '../../css/images/bv.png', 'position': '.NET', 'project': '', 'education': 'HiO'},
			  {'name': 'Marius Gundersen', 'img': '../../css/images/bv.png', 'position': 'Frontend / .NET', 'project': 'Komplett', 'education': 'NTNU'},
			  {'name': 'Njaal Gjerde', 'img': '../../css/images/bv.png', 'position': 'Frontend / .NET', 'project': 'Komplett', 'education': 'NTNU'},
			  {'name': 'Andreas Brustad', 'img': '../../css/images/bv.png', 'position': '.NET', 'project': 'Komplett', 'education': 'NTNU'},
			  {'name': 'Samson Valland', 'img': '../../css/images/bv.png', 'position': '.NET', 'project': 'NAF', 'education': '?'}
			];
			var template = document.querySelector('#contact-template'),
				contactsWrapper = document.querySelector(".contacts");

			for(var i = 0; i < contacts.length; i++) {
				var clone = document.importNode(template.content, true);
				populatedAndInstertTemplate(i, clone);
			}

			function populatedAndInstertTemplate(i, clone){
				clone.querySelector("h2").textContent = contacts[i].name;
				clone.querySelector("img").src = contacts[i].img;
				clone.querySelector(".position").textContent = contacts[i].position;
				clone.querySelector(".project").textContent = contacts[i].project;
				clone.querySelector(".education").textContent = contacts[i].education;

				var parentNode = document.createElement("section");
				parentNode.className = "contact-wrapper";

				contactsWrapper.appendChild(parentNode);
				parentNode.appendChild(clone);
				parentNode.addEventListener("click", function(){
					var details = parentNode.querySelector(".detailed-info");
						if(details.classList.contains("hidden")){
							details.className = "detailed-info";
						} else {
							details.className = details.className + " hidden";
						}
				});
			}
		</script>
	</body>
</html>
